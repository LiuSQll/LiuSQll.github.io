<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
</head>
<body>
    <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
    <button id="fade-btn">淡出</button>
    <p></p>
    
    <script>
        
        var btn = document.getElementById("fade-btn");
        var x = 1; 
        //淡出
        function fadeOut(){
        if(x>0){
          x-=0.1;
          document.getElementById("fade-obj").style.opacity = x;
         // document.querySelector("p").innerHTML = "透明值：" + x;
          var flag1= setTimeout("fadeOut()",100);
          btn.disabled = true;
        }else{
         clearTimeout(flag1);
          btn.disabled = false;
          btn.innerHTML = "淡入";
          btn.onclick = function(){fadeIn();}
        }
        }
        //淡入
        function fadeIn(){
        if(x<1){
          x+=0.1;
          document.getElementById("fade-obj").style.opacity = x;
         // document.querySelector("p").innerHTML = "透明值：" + x;
          var flag2= setTimeout("fadeIn()",100);
          btn.disabled = true;
        }else{
          clearTimeout(flag2);
          btn.disabled = false;
          btn.innerHTML = "淡出";
          btn.onclick = function(){fadeOut();}
        }
        }
    btn.onclick = fadeOut;
    </script>    
</body>
</html>